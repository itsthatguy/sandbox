<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JS Bin</title>
  <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
  <script type="text/x-handlebars">
    <main>
      <header>
        <h2>Simple chat</h2>

        {{render "chat-tabs" App.chats}}

        <span>Temporary until add channel button is hooked up: </span>
        {{#link-to "index"}}index{{/link-to}}
        {{#link-to "chat" "#vikinghug"}}#vikinghug{{/link-to}}
        {{#link-to "chat" "#switchboard"}}#switchboard{{/link-to}}
      </header>
      {{outlet}}
    </main>

  </script>


  <script type="text/x-handlebars" data-template-name="index">
    <p>Please select a chatroom above</p>
  </script>

  <script type="text/x-handlebars" data-template-name="chat">

    {{#scrolling-div id="messages-div" update-when=this}}
      <ul>
        {{#each}}
          <li>{{this}}</li>
        {{/each}}
      </ul>
    {{/scrolling-div}}
    {{ input value=msg id="newMessage" action="sendMessage"}}
  </script>

  <script type="text/x-handlebars" data-template-name="chat-tabs">

    {{#each}}
      {{view App.ChatTabView}}
    {{else}}
      <p>No Channels</p>
    {{/each}}
    {{ input value=msg id="newChannel" action="joinChannel"}}
    <button {{action joinChannel}}>Add Channel</button>
  </script>

  <script type="text/x-handlebars" data-template-name="chat-tab">
    <a href="/#/chat/{{unbound name}}">{{name}}</a>
  </script>

  <script type="text/x-handlebars" id="components/scrolling-div">
    {{yield}}
  </script>


<script src="/vendor/jquery/dist/jquery.min.js"></script>
<script src="/vendor/handlebars/handlebars.js"></script>
<script src="/vendor/ember/ember.js"></script>
<script src="/assets/js/app.js"></script>
</body>
</html>